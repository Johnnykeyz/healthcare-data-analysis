<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Healthcare Data Analysis Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-gray-50">
    <div class="min-h-screen p-6">
        <!-- Header -->
        <header class="mb-8">
            <h1 class="text-4xl font-bold text-gray-800 mb-2">üè• Healthcare Data Analysis</h1>
            <p class="text-gray-600">Patient Treatment Outcomes & Resource Utilization Analysis</p>
            <p class="text-sm text-gray-500 mt-1">Data Period: January - July 2024 | 70 Patients</p>
        </header>

        <!-- KPI Cards -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-8">
            <div class="bg-white p-6 rounded-lg shadow-md border-l-4 border-blue-500">
                <p class="text-gray-500 text-sm mb-1">Total Patients</p>
                <p class="text-3xl font-bold text-gray-800" id="total-patients">70</p>
            </div>
            <div class="bg-white p-6 rounded-lg shadow-md border-l-4 border-green-500">
                <p class="text-gray-500 text-sm mb-1">Success Rate</p>
                <p class="text-3xl font-bold text-green-600" id="success-rate">95.7%</p>
            </div>
            <div class="bg-white p-6 rounded-lg shadow-md border-l-4 border-purple-500">
                <p class="text-gray-500 text-sm mb-1">Avg Length of Stay</p>
                <p class="text-3xl font-bold text-purple-600" id="avg-stay">5.3 days</p>
            </div>
            <div class="bg-white p-6 rounded-lg shadow-md border-l-4 border-yellow-500">
                <p class="text-gray-500 text-sm mb-1">Avg Treatment Cost</p>
                <p class="text-3xl font-bold text-yellow-600" id="avg-cost">$12,517</p>
            </div>
            <div class="bg-white p-6 rounded-lg shadow-md border-l-4 border-red-500">
                <p class="text-gray-500 text-sm mb-1">Readmission Rate</p>
                <p class="text-3xl font-bold text-red-600" id="readmit-rate">4.3%</p>
            </div>
        </div>

        <!-- Tab Navigation -->
        <div class="mb-6">
            <div class="border-b border-gray-200">
                <nav class="flex space-x-4">
                    <button onclick="showTab('conditions')" class="tab-btn px-4 py-2 font-medium text-blue-600 border-b-2 border-blue-600" id="tab-conditions">
                        By Condition
                    </button>
                    <button onclick="showTab('treatments')" class="tab-btn px-4 py-2 font-medium text-gray-500 hover:text-gray-700" id="tab-treatments">
                        By Treatment
                    </button>
                    <button onclick="showTab('demographics')" class="tab-btn px-4 py-2 font-medium text-gray-500 hover:text-gray-700" id="tab-demographics">
                        Demographics
                    </button>
                    <button onclick="showTab('trends')" class="tab-btn px-4 py-2 font-medium text-gray-500 hover:text-gray-700" id="tab-trends">
                        Trends
                    </button>
                </nav>
            </div>
        </div>

        <!-- Content Sections -->
        <div id="content-conditions" class="tab-content">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h3 class="text-xl font-semibold mb-4 text-gray-800">Treatment Distribution</h3>
                    <canvas id="treatmentDistChart"></canvas>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h3 class="text-xl font-semibold mb-4 text-gray-800">Treatment Effectiveness</h3>
                    <canvas id="treatmentSuccessChart"></canvas>
                </div>
            </div>
        </div>

        <div id="content-demographics" class="tab-content hidden">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h3 class="text-xl font-semibold mb-4 text-gray-800">Age Group Analysis</h3>
                    <canvas id="ageGroupChart"></canvas>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h3 class="text-xl font-semibold mb-4 text-gray-800">Cost by Age Group</h3>
                    <canvas id="ageCostChart"></canvas>
                </div>
            </div>
        </div>

        <div id="content-trends" class="tab-content hidden">
            <div class="grid grid-cols-1 gap-6">
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h3 class="text-xl font-semibold mb-4 text-gray-800">Monthly Admissions Trend</h3>
                    <canvas id="monthlyAdmissionsChart"></canvas>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h3 class="text-xl font-semibold mb-4 text-gray-800">Monthly Average Cost Trend</h3>
                    <canvas id="monthlyCostChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Key Insights -->
        <div class="mt-8 bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-lg shadow-md border-l-4 border-indigo-500">
            <h3 class="text-xl font-semibold mb-4 text-gray-800">üí° Key Insights</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="bg-white p-4 rounded-lg">
                    <p class="text-sm font-semibold text-green-600 mb-2">‚úÖ Best Performing</p>
                    <p class="text-gray-700">Orthopedic treatments show highest success rate at 100%</p>
                </div>
                <div class="bg-white p-4 rounded-lg">
                    <p class="text-sm font-semibold text-red-600 mb-2">‚ö†Ô∏è Needs Attention</p>
                    <p class="text-gray-700">Heart Disease has 4.3% readmission rate requiring follow-up improvements</p>
                </div>
                <div class="bg-white p-4 rounded-lg">
                    <p class="text-sm font-semibold text-purple-600 mb-2">üí∞ Cost Optimization</p>
                    <p class="text-gray-700">Neurological cases average $20,729 - explore early intervention strategies</p>
                </div>
                <div class="bg-white p-4 rounded-lg">
                    <p class="text-sm font-semibold text-blue-600 mb-2">üìà Growth Trend</p>
                    <p class="text-gray-700">Admissions increased 35.8% from Jan to Jun showing growing capacity needs</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Sample data - In real use, this would come from analysis_results.json
        const data = {
            summary: {
                total_patients: 70,
                avg_stay: 5.3,
                avg_cost: 12517,
                success_rate: 95.7,
                readmission_rate: 4.3
            },
            by_condition: [
                { condition: 'Diabetes', Patient_Count: 14, Avg_Stay_Days: 4.21, Avg_Cost: 8821.43, Success_Rate: 100.0 },
                { condition: 'Heart Disease', Patient_Count: 14, Avg_Stay_Days: 7.43, Avg_Cost: 17614.29, Success_Rate: 92.9 },
                { condition: 'Neurological', Patient_Count: 7, Avg_Stay_Days: 7.71, Avg_Cost: 20728.57, Success_Rate: 100.0 },
                { condition: 'Orthopedic', Patient_Count: 14, Avg_Stay_Days: 3.0, Avg_Cost: 12450.0, Success_Rate: 100.0 },
                { condition: 'Respiratory', Patient_Count: 21, Avg_Stay_Days: 4.48, Avg_Cost: 8690.48, Success_Rate: 100.0 }
            ],
            by_treatment: [
                { treatment_type: 'Medication', Patient_Count: 28, Avg_Cost: 9232.14, Success_Rate: 96.4, Avg_Stay: 5.11 },
                { treatment_type: 'Surgery', Patient_Count: 21, Avg_Cost: 17619.05, Success_Rate: 95.2, Avg_Stay: 6.24 },
                { treatment_type: 'Therapy', Patient_Count: 21, Avg_Cost: 10404.76, Success_Rate: 95.2, Avg_Stay: 4.43 }
            ],
            monthly_trends: [
                { month: '2024-01', admissions: 10, avg_cost: 11840 },
                { month: '2024-02', admissions: 12, avg_cost: 12483 },
                { month: '2024-03', admissions: 13, avg_cost: 13077 },
                { month: '2024-04', admissions: 11, avg_cost: 12018 },
                { month: '2024-05', admissions: 11, avg_cost: 12864 },
                { month: '2024-06', admissions: 10, avg_cost: 12420 },
                { month: '2024-07', admissions: 3, avg_cost: 11000 }
            ]
        };

        // Tab switching
        function showTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(el => el.classList.add('hidden'));
            document.querySelectorAll('.tab-btn').forEach(el => {
                el.classList.remove('text-blue-600', 'border-b-2', 'border-blue-600');
                el.classList.add('text-gray-500');
            });
            
            document.getElementById('content-' + tabName).classList.remove('hidden');
            document.getElementById('tab-' + tabName).classList.add('text-blue-600', 'border-b-2', 'border-blue-600');
            document.getElementById('tab-' + tabName).classList.remove('text-gray-500');
        }

        // Populate condition table
        function populateConditionTable() {
            const tbody = document.getElementById('condition-tbody');
            tbody.innerHTML = data.by_condition.map(item => `
                <tr class="hover:bg-gray-50">
                    <td class="px-4 py-3 text-sm text-gray-900 font-medium">${item.condition}</td>
                    <td class="px-4 py-3 text-sm text-gray-600 text-right">${item.Patient_Count}</td>
                    <td class="px-4 py-3 text-sm text-gray-600 text-right">${item.Avg_Stay_Days.toFixed(1)} days</td>
                    <td class="px-4 py-3 text-sm text-gray-600 text-right">${item.Avg_Cost.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, ",")}</td>
                    <td class="px-4 py-3 text-sm text-right">
                        <span class="px-2 py-1 rounded-full text-xs font-semibold ${item.Success_Rate === 100 ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800'}">
                            ${item.Success_Rate.toFixed(1)}%
                        </span>
                    </td>
                </tr>
            `).join('');
        }

        // Chart configurations
        const chartColors = {
            blue: 'rgb(59, 130, 246)',
            green: 'rgb(16, 185, 129)',
            purple: 'rgb(139, 92, 246)',
            yellow: 'rgb(245, 158, 11)',
            red: 'rgb(239, 68, 68)'
        };

        // Condition Success Chart
        new Chart(document.getElementById('conditionSuccessChart'), {
            type: 'bar',
            data: {
                labels: data.by_condition.map(d => d.condition),
                datasets: [{
                    label: 'Success Rate (%)',
                    data: data.by_condition.map(d => d.Success_Rate),
                    backgroundColor: chartColors.green
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                scales: {
                    y: { beginAtZero: true, max: 100 }
                }
            }
        });

        // Condition Cost Chart
        new Chart(document.getElementById('conditionCostChart'), {
            type: 'bar',
            data: {
                labels: data.by_condition.map(d => d.condition),
                datasets: [{
                    label: 'Average Cost ($)',
                    data: data.by_condition.map(d => d.Avg_Cost),
                    backgroundColor: chartColors.purple
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                scales: { y: { beginAtZero: true } }
            }
        });

        // Treatment Distribution
        new Chart(document.getElementById('treatmentDistChart'), {
            type: 'doughnut',
            data: {
                labels: data.by_treatment.map(d => d.treatment_type),
                datasets: [{
                    data: data.by_treatment.map(d => d.Patient_Count),
                    backgroundColor: [chartColors.blue, chartColors.green, chartColors.purple]
                }]
            },
            options: { responsive: true, maintainAspectRatio: true }
        });

        // Treatment Success Chart
        new Chart(document.getElementById('treatmentSuccessChart'), {
            type: 'bar',
            data: {
                labels: data.by_treatment.map(d => d.treatment_type),
                datasets: [{
                    label: 'Success Rate (%)',
                    data: data.by_treatment.map(d => d.Success_Rate),
                    backgroundColor: chartColors.blue
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                scales: { y: { beginAtZero: true, max: 100 } }
            }
        });

        // Age Group Charts
        const ageGroups = ['Young (18-35)', 'Middle (36-50)', 'Senior (51-65)', 'Elderly (66+)'];
        const agePatients = [14, 21, 14, 21];
        const ageCosts = [9357, 11429, 14071, 16619];

        new Chart(document.getElementById('ageGroupChart'), {
            type: 'bar',
            data: {
                labels: ageGroups,
                datasets: [{
                    label: 'Number of Patients',
                    data: agePatients,
                    backgroundColor: chartColors.yellow
                }]
            },
            options: { responsive: true, maintainAspectRatio: true, scales: { y: { beginAtZero: true } } }
        });

        new Chart(document.getElementById('ageCostChart'), {
            type: 'line',
            data: {
                labels: ageGroups,
                datasets: [{
                    label: 'Average Cost ($)',
                    data: ageCosts,
                    borderColor: chartColors.red,
                    backgroundColor: 'rgba(239, 68, 68, 0.1)',
                    tension: 0.3,
                    fill: true
                }]
            },
            options: { responsive: true, maintainAspectRatio: true, scales: { y: { beginAtZero: true } } }
        });

        // Monthly Trends
        new Chart(document.getElementById('monthlyAdmissionsChart'), {
            type: 'line',
            data: {
                labels: data.monthly_trends.map(d => d.month),
                datasets: [{
                    label: 'Monthly Admissions',
                    data: data.monthly_trends.map(d => d.admissions),
                    borderColor: chartColors.blue,
                    backgroundColor: 'rgba(59, 130, 246, 0.1)',
                    tension: 0.3,
                    fill: true
                }]
            },
            options: { responsive: true, maintainAspectRatio: true, scales: { y: { beginAtZero: true } } }
        });

        new Chart(document.getElementById('monthlyCostChart'), {
            type: 'line',
            data: {
                labels: data.monthly_trends.map(d => d.month),
                datasets: [{
                    label: 'Average Cost ($)',
                    data: data.monthly_trends.map(d => d.avg_cost),
                    borderColor: chartColors.purple,
                    backgroundColor: 'rgba(139, 92, 246, 0.1)',
                    tension: 0.3,
                    fill: true
                }]
            },
            options: { responsive: true, maintainAspectRatio: true, scales: { y: { beginAtZero: true } } }
        });

        // Initialize
        populateConditionTable();
    </script>
</body>
</html>
